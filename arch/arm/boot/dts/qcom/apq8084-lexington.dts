/* Copyright (c) 2013, The Linux Foundation. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

/dts-v1/;

#include "apq8084.dtsi"
#include "apq8084-lexington.dtsi"

/ {
	model = "Motorola APQ 8084 Lexington";
	compatible = "qcom,apq8084-lexington",
		   "qcom,apq8084-moto",
		   "qcom,apq8084";
	qcom,board-id = <23 0>;
};

&i2c_0 {
	smb1357_otg_vreg: smb1357-charger@1c {
		compatible = "qcom,smb1357-charger";
		reg = <0x1c>;
		interrupt-parent = <&spmi_bus>;
		interrupts = <0x0 0xcd 0x0>;	/* PMA8084 GPIO 14 */
		qcom,float-voltage-mv = <4200>;
		qcom,charging-timeout = <1536>;
		qcom,recharge-thresh-mv = <200>;
		qcom,iterm-ma = <100>;
		regulator-name = "smb1357_otg_vreg";
		qcom,soft-vfloat-comp-disabled;
		therm-bias-supply = <&pma8084_lvs2>;
	};
};

&i2c_1 {
	synaptics@20 {
		status = "disabled";
	};

	synaptics_dsx_i2c@20 {
		compatible = "synaptics,synaptics_dsx_i2c";
		reg = <0x20>;
		interrupt-parent = <&msmgpio>;
		interrupts = <84 0>;
		gpios = <&msmgpio 84 0>, /* IRQ */
			<&msmgpio 97 0>; /* RESET */
		touch_vdd-supply = <&pma8084_l19>;
		synaptics,normal-mode = <1>;
		synaptics,gpio-config;
	};
	/* TI drv2605 */
	drv2605@5a {
		compatible = "ti,drv2605";
		reg = <0x5A>;
		gpios = <&msmgpio 75 0>,        /* EN_GPIO */
			<&msmgpio 74 0>;        /* Trigger */
		external_trigger = <1>;
		default_effect = <17>;          /* Strong Click 100% */
		rated_voltage = <0x70>;         /* 2.4v */
		overdrive_voltage = <0x89>;     /* 3.0v */
	};
};

&i2c_8 {
	tpa6165xx@40 {
		compatible = "ti,tpa6165";
		reg = <0x40>;
		interrupts = <&msmgpio 9 0x0>;
		gpios = <&msmgpio 9 0x0>;
		hs_det_vdd-supply = <&pma8084_lvs2>;
		hs_det_micvdd-supply = <&pma8084_l18>;
		ti,tpa6165-always-on-micbias = <1>;
	};
	bcm2079x@76 {
		compatible = "brcm,bcm2079x";
		reg = <0x76>;
		interrupt-parent = <&msmgpio>;
		interrupts = <8 0>; /* NFC_IRQ */
		gpios = <&pma8084_mpps 5 0>, /* NFC_WAKE */
			<&msmgpio 8 0>, /* NFC_IRQ */
			<&msmgpio 116 0>; /* REG_PU */
	};

	tfa9890@34 {
		compatible = "nxp,tfa9890";
		reg = <0x34>;
		gpios = <&msmgpio 129 0>;     /* RESET */
		tfa_vdd-supply = <&pma8084_s4>;
		nxp,tfa_max-vol-steps = <15>;
		nxp,tfa-dev = "left";
	};
};

&soc {
	sound {
		/delete-property/ qcom,quat-auxpcm-gpio-sclk;
		/delete-property/ qcom,quat-auxpcm-gpio-ws;
		/delete-property/ qcom,quat-auxpcm-gpio-dout;
		/delete-property/ qcom,quat-auxpcm-gpio-din;
		pinctrl-names = "pmx-quad-mi2s-sleep",
				"pmx-quad-mi2s-active";
		pinctrl-0 = <&quad_mi2s_sleep>;
		pinctrl-1 = <&quad_mi2s_active>;
		qcom,tfa9890-left-name = "tfa9890.8-0034";
	};

	qcom,msm-dai-mi2s {
		compatible = "qcom,msm-dai-mi2s";
		qcom,msm-dai-q6-mi2s-quat {
			compatible = "qcom,msm-dai-q6-mi2s";
			qcom,msm-dai-q6-mi2s-dev-id = <3>;
			qcom,msm-mi2s-rx-lines = <2>;
			qcom,msm-mi2s-tx-lines = <1>;
		};
	};
};

&usb3 {
	vbus_dwc3-supply = <&smb1357_otg_vreg>;
};
